{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to Family Bell","text":"<p>This is the documentation for the Family Bell integration for Home Assistant.</p>"},{"location":"CONTRIBUTING/","title":"Contributing","text":"<p>Contributions are welcome, and they are greatly appreciated! Every little bit helps, and credit will always be given.</p>"},{"location":"CONTRIBUTING/#types-of-contributions","title":"Types of Contributions","text":""},{"location":"CONTRIBUTING/#report-bugs","title":"Report Bugs","text":"<p>Report bugs at https://github.com/brewmarsh/family_bell/issues.</p> <p>If you are reporting a bug, please include:</p> <ul> <li>Your operating system name and version.</li> <li>Any details about your local setup that might be helpful in troubleshooting.</li> <li>Detailed steps to reproduce the bug.</li> </ul>"},{"location":"CONTRIBUTING/#submit-feedback","title":"Submit Feedback","text":"<p>The best way to send feedback is to file an issue at https://github.com/brewmarsh/family_bell/issues.</p> <p>If you are proposing a feature:</p> <ul> <li>Explain in detail how it would work.</li> <li>Keep the scope as narrow as possible, to make it easier to implement.</li> <li>Remember that this is a volunteer-driven project, and that contributions are welcome :)</li> </ul>"},{"location":"CONTRIBUTING/#pull-request-guidelines","title":"Pull Request Guidelines","text":"<p>Before you submit a pull request, check that it meets these guidelines:</p> <ol> <li>The pull request should include tests.</li> <li>If the pull request adds functionality, the docs should be updated.</li> <li>The pull request should work for Python 3.9, and 3.10. Check the CI builds, and make sure that the tests pass for all supported Python versions.</li> </ol>"},{"location":"agents/","title":"Developer &amp; Agent Instructions","text":""},{"location":"agents/#repository-overview","title":"Repository Overview","text":"<p>This repository contains a Home Assistant custom component (<code>family_bell</code>). It follows Semantic Versioning and uses Conventional Commits to automate versioning.</p>"},{"location":"agents/#branching-strategy","title":"Branching Strategy","text":"<p>We use a variation of GitHub Flow / Trunk-Based Development.</p> <ul> <li><code>main</code>: The source of truth. It should always be deployable.</li> <li>Feature Branches: All changes (features, fixes) should be done in short-lived branches (e.g., <code>feat/my-feature</code>, <code>fix/bug-123</code>) and merged into <code>main</code> via Pull Request.</li> <li><code>beta</code>: An optional long-lived branch used for testing changes on a \"beta\" deployment target before merging to <code>main</code>.</li> <li>To test a feature: Merge your feature branch into <code>beta</code>. The <code>deploy-local</code> workflow will deploy it to the configured local Home Assistant instance.</li> <li>Once verified: Merge the feature branch into <code>main</code>.</li> </ul>"},{"location":"agents/#versioning-releases","title":"Versioning &amp; Releases","text":"<p>Versioning is automated based on commit messages.</p> <ol> <li> <p>Conventional Commits: You MUST follow the Conventional Commits specification.</p> <ul> <li><code>feat: ...</code> -&gt; Minor version bump.</li> <li><code>fix: ...</code> -&gt; Patch version bump.</li> <li><code>BREAKING CHANGE: ...</code> or <code>feat!: ...</code> -&gt; Major version bump.</li> <li><code>chore:</code>, <code>docs:</code>, etc. -&gt; No version bump (unless configured otherwise).</li> </ul> </li> <li> <p>Automation:</p> <ul> <li>The <code>.github/workflows/auto-bump.yaml</code> workflow runs on every push to <code>main</code>.</li> <li>It calculates the next version based on new commits.</li> <li>It updates <code>manifest.json</code>.</li> <li>It pushes a commit <code>chore(release): bump version to X.Y.Z</code>.</li> <li>It creates and pushes a git tag <code>vX.Y.Z</code>.</li> </ul> </li> <li> <p>Manual Release:</p> <ul> <li>Use <code>.github/workflows/release.yaml</code> to manually prepare a release PR if needed (e.g., to force a specific version bump).</li> <li>Note: Since <code>auto-bump</code> runs on every merge to <code>main</code>, merging a manual release PR might trigger a subsequent automated patch bump unless the merge commit message starts with <code>chore(release):</code>.</li> </ul> </li> </ol>"},{"location":"agents/#feature-promotion-workflow","title":"Feature Promotion Workflow","text":"<ol> <li>Develop: Create a branch <code>feat/cool-thing</code>. Write code and tests.</li> <li>Verify: Run tests locally (<code>pytest</code>).</li> <li>Beta Test (Optional): Merge <code>feat/cool-thing</code> into <code>beta</code>. Verify on the local HA instance.</li> <li>Review: Open a PR to <code>main</code>. Ensure CI passes.</li> <li>Merge: Merge to <code>main</code>.</li> <li>Release: The system automatically bumps the version and deploys.</li> </ol>"},{"location":"agents/#local-deployment","title":"Local Deployment","text":"<p>The <code>deploy-local.yml</code> workflow deploys code to a local Home Assistant instance via <code>rsync</code>. - Triggers: Pushes to <code>main</code> and <code>beta</code>. - Requirements: Self-hosted runner with access to the HA instance file system.</p>"},{"location":"agents/#frontend-development","title":"Frontend Development","text":"<ul> <li>Frontend code resides in <code>custom_components/family_bell/www/</code>.</li> <li>It uses LitElement and native ES modules.</li> <li>No build step (bundler) is used; files are served directly.</li> <li>Verification: Changes to frontend often require clearing the browser cache or bumping the version in <code>manifest.json</code> (handled by auto-bump) to force HA to reload assets.</li> </ul>"},{"location":"agents/#testing","title":"Testing","text":"<ul> <li>Unit Tests: Run <code>pytest tests/</code>.</li> <li>Pre-commit: Ensure all pre-commit checks pass (linting, formatting).</li> </ul>"},{"location":"configuration/","title":"Configuration","text":"<p>Configuration is handled through the Home Assistant UI.</p> <ol> <li>Navigate to Settings &gt; Devices &amp; Services.</li> <li>Click + ADD INTEGRATION.</li> <li>Search for Family Bell.</li> <li>Follow the on-screen prompts in the setup wizard:<ul> <li>TTS Provider: Select your preferred Text-to-Speech engine from the dropdown list (e.g., <code>tts.google_en_com</code> or <code>tts.piper</code>). This determines which service will be used to generate the announcements.</li> <li>Voice/Language: (Optional) If your chosen TTS provider supports different voices or languages, you can specify that here.</li> </ul> </li> </ol> <p>You can change these settings at any time by navigating to the integration's card in Settings &gt; Devices &amp; Services and clicking Configure.</p>"},{"location":"installation/","title":"Installation","text":"<p>There are two ways to install the Family Bell integration for Home Assistant: via the Home Assistant Community Store (HACS) or manually.</p>"},{"location":"installation/#hacs-recommended","title":"HACS (Recommended)","text":"<ol> <li>Ensure HACS is installed: If you haven't already, install the Home Assistant Community Store (HACS).</li> <li>Add Custom Repository:<ul> <li>In HACS, go to \"Integrations\".</li> <li>Click the three dots in the top right and select \"Custom repositories\".</li> <li>In the \"Repository\" field, enter the URL of this custom integration's GitHub repository: <code>https://github.com/brewmarsh/family-bell</code>.</li> <li>For \"Category\", select \"Integration\".</li> <li>Click \"Add\".</li> </ul> </li> <li>Install Integration:<ul> <li>Search for \"Family Bell\" in HACS.</li> <li>Click \"Install\" and follow the prompts.</li> </ul> </li> <li>Restart Home Assistant: After installation, restart your Home Assistant instance to load the integration.</li> </ol>"},{"location":"installation/#manual-installation","title":"Manual Installation","text":"<ol> <li>Download: Download the latest release from the releases page.</li> <li>Copy Files: Unzip the downloaded file and copy the <code>custom_components/family_bell</code> folder into your Home Assistant's <code>config/custom_components/</code> directory.</li> <li>Restart Home Assistant: Restart your Home Assistant instance to load the integration.</li> </ol>"},{"location":"pipeline_best_practices/","title":"Pipeline Best Practices","text":"<p>This document outlines best practices for the CI/CD pipeline in this repository.</p>"},{"location":"pipeline_best_practices/#general-principles","title":"General Principles","text":"<ul> <li>Keep it Simple: Pipelines should be easy to understand and maintain. Avoid over-complicating workflows.</li> <li>Fail Fast: Design your pipeline to catch errors as early as possible. Run quick checks like linting and unit tests before longer-running tasks like integration or end-to-end tests.</li> <li>Idempotency: Pipelines should be designed to be runnable multiple times with the same result.</li> </ul>"},{"location":"pipeline_best_practices/#action-versioning","title":"Action Versioning","text":"<ul> <li> <p>Pin Actions to a Specific SHA: To ensure pipeline stability and security, always pin GitHub Actions to a specific commit SHA rather than a branch or tag (e.g., <code>v2</code>). This prevents unexpected changes from breaking your builds.</p> <p>```yaml</p> </li> </ul>"},{"location":"pipeline_best_practices/#good","title":"Good","text":"<ul> <li>uses: actions/checkout@a12a3943b4bdde767164d792f336fc14de6c3df2 # v3.5.3</li> </ul>"},{"location":"pipeline_best_practices/#avoid","title":"Avoid","text":"<ul> <li>uses: actions/checkout@v3</li> <li>uses: actions/checkout@main ```</li> </ul>"},{"location":"pipeline_best_practices/#dependency-management","title":"Dependency Management","text":"<ul> <li>Cache Dependencies: Use caching mechanisms (like <code>actions/cache</code>) to speed up builds by storing and reusing dependencies.</li> <li>Lock Dependencies: Always use a lock file (e.g., <code>requirements.txt</code>, <code>package-lock.json</code>) to ensure that the same versions of dependencies are used in every build.</li> </ul>"},{"location":"pipeline_best_practices/#security","title":"Security","text":"<ul> <li>Use Secrets: Store all sensitive information, such as API keys and tokens, as encrypted secrets in GitHub. Do not hardcode them in your workflow files.</li> <li>Limit Permissions: Grant your workflows only the minimum permissions they need to perform their tasks.</li> </ul>"},{"location":"pipeline_best_practices/#testing","title":"Testing","text":"<ul> <li>Comprehensive Testing: The pipeline should run a comprehensive suite of tests, including unit, integration, and end-to-end tests, to ensure code quality.</li> <li>Run on Pull Requests: All tests should be automatically triggered on every pull request to the <code>main</code> branch to catch issues before they are merged.</li> </ul>"},{"location":"runner_setup/","title":"Runner Setup","text":"<p>Documentation for setting up the self-hosted runner is coming soon.</p>"},{"location":"todo/","title":"TODO","text":"<p>This file lists the future tasks and improvements for this project.</p> <ul> <li>[ ] Add more tests</li> <li>[ ] Improve documentation</li> </ul>"}]}